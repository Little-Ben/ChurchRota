Changelog of Church Rota
========================

   Please check sourceforge for updates
   http://sourceforge.net/projects/churchrota/
   
   Code SVN Repository (LATEST = TRUNK)
   http://sourceforge.net/p/churchrota/code/
   
   twitter: @ChurchRota  and  @ChurchRota_Dev


---------------------------------------------------------------------------   
V2.2.0 - SVN tag 2013-09-02_v2_2_0 - Revision 21 - Benjamin Schmitt 
- validate email addresses before sending Rota Overview Mail, error output
- workaround for displaying error in snapshot 
  (disabled new sorting feature (v2.1.1), need to find a bug)
- reduce available filters according current used event types
  (snapshot and event overview)
- formatting GPL license file (html), added text version (LICENSE.TXT)
- Debug Mode

---------------------------------------------------------------------------   
V2.1.2 - Revision 20 - Benjamin Schmitt 
- Removed Google-Analytics due to privacy reasons

---------------------------------------------------------------------------   
V2.1.1 - Revision 19 - Benjamin Schmitt 
- Snapshot - sort columns by skill group and skill name (new option)
   
---------------------------------------------------------------------------   
V2.1.0 - SVN tag 2013-08_01_V2_1_0 - Benjamin Schmitt 

security fixes:
- prevent user impersonating in "My Account" and in "Change password"
- send mail to system admin when attack has happend
- notify system admin via mail when updating database

new functionalities (and corresponding options in settings):
- optional sorting events in descending order (only index.php)
- optional also show snapshot button for users
- configurable language locales and formats for date/time 
- Rota Overview mail (for a whole month)
  + new flag for users "is Overview Recipient" (in user management)
  + send mail for actual month (or next month if actual day > 20)
  + preview page (with editing posibility)
- Google calender export per event in snapshot (via URL)
  + if logged in as normal user: only date, time, event type, location
  + if logged in as admin user: same as user plus leader/preacher/band 
    infos
  + utf8-wrapper (for URL-encoding)
  + field for Google Group Calendar ID (settings)
  + Time Zone
- optional reduce events to "show my events" direct after users login
- optional reduce snapshot to max defined skill group of logged in user 
  (not logged in => group 1), 
  so the more sensitive a skill group should be, the higher set its skill 
  group, example: 
    + band and host infos for not logged in users - group 1)
    + leading info should require group 2 (including infos of group 1)
    + preacher info only for users with group 3 rights 
      (including groups 1+2)
    + always all infos for admin users
    -> a user with a skill defined for skill group 2 
         * can see band, host and leading 
         * but can not see preaching
- optional only show actual month in snapshot,
  also shows events of following month if actual day > 20 
  ("TwoMonthView") 
- "array_combine" backport

changes "behind the scenes":
- send mail for rota overview
- configurable mail subject, now introduced in overview mail: 
  subject pattern needs to be in the first line of mail template,
  surrounded by {{ }} - example: 
     {{configurable subject}}
     rest of 
     mail message 
  future development: include this feature to all mail templates
- handling of password changing was broken (url post parameters)
- repaired link for deleting a skill (editSkills.php)
- removed file \graphics\design\maindesign.psd,
  it was propably a design study and is not needed in running system,
  deleted because of size (can be found in rev 7-15 of svn trunk)
- removing admin flag of an user, does not remove own admin rights
- subject of "New user mail" now includes new user's name

ui changes:
- introduced setting groups for different parts of settings
- preview page (and editing possibility) for actual Rota Overview
- add band instrument (already introduced with V.2.0.0)
- only show initial letter of first name in snapshot 
- first column of snapshot renamed "Date" ->  "Event"
---------------------------------------------------------------------------
V2.0.2 - SVN tag 2013-05-28_V2_0_2 - Benjamin Schmitt
- bugfix install script (includes/functions.php)
- update INSTALL.txt and rename to README.txt
---------------------------------------------------------------------------
V2.0.1 - SVN tag 2013-05-26_V2_0_1 - Benjamin Schmitt
- bugfix: sending email for new users was broken (includes/functions.mail.php)
- update: version string (includes/functions.database.php)
---------------------------------------------------------------------------
V2.0.0 - SVN tag 2013-05-22_V2_0_0

latest version by David Bunce (as a copy of a current installation)
  - General view/functionality
    + fixed: 'Back to Top' link
    + new background image
    + first item of a group (elementBackground) is no longer expanded 
	  automatically	
    + events and eventPeople are no longer deleted in database, 
      instead they are marked as 'deleted'
	+ new pop-up security question when deleting
  - Main Menu 'Home' (index.php)
    + added filter possibility for event types
    + removed submenu: View all bands
    + removed submenu: Add new band
    + removed comboboxes 'Add individuals', 'Add bands'
	+ only show events that are not marked deleted 
          and event date > today
  - Main Menu 'Discussion' (discussion.php)
    + removed whole main menu
  - Main Menu 'Users' (viewUsers.php)
    + removed submenu: View Bands
	+ added link: reset password (to 'churchrota')
	+ added button: link "showOnlyMyEvents" for chosen user
  - createEvent.php: 
    + fixed: sorting problem of control boxes, now within correct group
    + fixed: revoke 'make them an Admin', also revoked session admin rights 
  - snapshot.php
	+ only show events that are not marked deleted 
          and event date > today
	+ added filter possibility for event types
	+ added Church Rota header (and menues, if user is logged in)

modifications by Benjamin Schmitt (on top of David's work)
  - Database update functionality
    + includes/functions.database.php: database update functionality
    + includes/functions.php: 
        * include functions.database.php
        * add variables owneremail and version
    + login.php: calling database update functionality, 
                 after having logged in as admin
  - use owner variable again, instead of hardcoded church name/email
    + footer.php: show version string, changed copyright string
    + index.php: use owner / email variables 
    + settings.php: 
	    * insert editing of owner/organisation again
		* use mysql_real_escape_string again
    + install.php: 
	    * remove hardcoded church name
        * always give admin rights to first user		
  - added CHANGELOG.txt - this file
  - added INSTALL.txt - instruction steps for installation
  
---------------------------------------------------------------------------
V1.0.0 - SVN tag 2011-06-14_V1_0_0
this is the initial version (churchrota.zip)